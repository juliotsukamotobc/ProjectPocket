<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project Pocket</title>
  <link rel="stylesheet" href="./styles.css" />
  <!-- MediaPipe Tasks Vision (Pose Landmarker) via CDN -->
  <script type="module">
    import { FilesetResolver, PoseLandmarker } from "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.14";
    window.PP_Mediapipe = { FilesetResolver, PoseLandmarker };
  </script>
</head>
<body>
  <header>
    <h1>Project Pocket</h1>
    <p>Detecção e comparação de movimentos (Instrutor x Aluno)</p>
  </header>

  <main class="grid">
    <section class="panel">
      <div class="controls">
        <button id="btnStartCam">Iniciar câmera</button>
        <label><input type="radio" name="role" value="instructor" checked> Instrutor</label>
        <label><input type="radio" name="role" value="student"> Aluno</label>
        <button id="btnRecord">Gravar</button>
        <button id="btnStop" disabled>Parar</button>
        <button id="btnExport" disabled>Exportar JSON</button>
        <input id="fileImport" type="file" accept="application/json" hidden />
        <button id="btnImport">Carregar JSON do instrutor</button>
        <button id="btnCompare" disabled>Iniciar comparação</button>
      </div>

      <div class="sliders">
        <label>Janela de suavização (quadros)
          <input id="smoothWindow" type="range" min="1" max="15" step="1" value="5">
        </label>
        <label>Espessura da linha
          <input id="lineWidth" type="range" min="1" max="8" step="1" value="3">
        </label>
      </div>

      <div class="video-wrap">
        <div id="recordingTimer" class="timer hidden">0,000 s</div>
        <video id="video" playsinline></video>
        <canvas id="overlay"></canvas>
      </div>

      <div class="legend">
        <span class="dot instructor"></span> Instrutor
        <span class="dot student"></span> Aluno
        <span class="dot diff"></span> Diferença
      </div>
    </section>

    <section class="panel">
      <h2>Status</h2>
      <pre id="log"></pre>
      <h2>Ângulos (graus)</h2>
      <div id="angles"></div>
    </section>
  </main>

  <footer>
    <small>MIT © Project Pocket</small>
  </footer>

  <script type="module" src="./src/main.js"></script>
</body>
</html>
